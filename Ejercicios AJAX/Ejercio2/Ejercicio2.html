<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Ejercicio2</title>
    <style type="text/css">
        body {
            margin: 0;
        }

        #contenidos {
            padding: 1em;
        }

        #ticker {
            height: 20px;
            padding: .3em;
            border-bottom: 1px solid #CCC;
            background: #FAFAFA;
            font-family: Arial, Helvetica, sans-serif;
        }

        #ticker strong {
            margin-right: 1em;
        }

        #acciones {
            position: absolute;
            top: 3px;
            right: 3px;
        }
    </style>
    <script type="text/javascript">
        window.onload = function () {
            // Array para almacenar las frases de las noticias
            let frases = [];
            let xhr = new XMLHttpRequest();
            xhr.open("GET","Ejercicio2.php", true);

            // Función para obtener las noticias del servidor
            function getNewsFromServer() {
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        // Obtener la respuesta del servidor
                        let response = xhr.responseText;
                        // Dividir la respuesta en frases individuales
                        frases = response.split("\n");
                    }
                };
                xhr.send();
            }

            // Función para mostrar el contenido anterior
            function showPrevious() {
                // Detener las peticiones periódicas
                clearInterval(interval);
                // Obtener el contenido actual del ticker
                let currentContent = document.getElementById("ticker").innerHTML;
                // Obtener el índice de la frase actual en el array de frases
                let currentIndex = frases.indexOf(currentContent);
                // Obtener el índice de la frase anterior
                let previousIndex = (currentIndex - 1 + frases.length) % frases.length;
                // Mostrar la frase anterior en el ticker
                document.getElementById("ticker").innerHTML = frases[previousIndex];
            }

            // Función para mostrar el contenido siguiente
            function showNext() {
                // Detener las peticiones periódicas
                clearInterval(interval);
                // Obtener el contenido actual del ticker
                let currentContent = document.getElementById("ticker").innerHTML;
                // Obtener el índice de la frase actual en el array de frases
                let currentIndex = frases.indexOf(currentContent);
                // Obtener el índice de la frase siguiente
                let nextIndex = (currentIndex + 1) % frases.length;
                // Mostrar la frase siguiente en el ticker
                document.getElementById("ticker").innerHTML = frases[nextIndex];
            }

            // Asignar los eventos a los botones
            document.getElementById("anterior").addEventListener("click", showPrevious);
            document.getElementById("siguiente").addEventListener("click", showNext);

            // Variable para almacenar el intervalo de tiempo
            let interval;

            // Función para realizar la petición al servidor y mostrar la respuesta en el ticker
            function getNews() {
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        // Obtener la respuesta del servidor
                        let response = xhr.responseText;
                        // Obtener la hora actual
                        let currentTime = new Date().toLocaleTimeString();
                        // Mostrar la respuesta y la hora en el ticker
                        document.getElementById("ticker").innerHTML = "<strong>" + currentTime + "</strong> " + response;
                    }
                };
                xhr.send();
            }

            // Iniciar las peticiones periódicas al servidor
            interval = setInterval(getNews, 1000);
        };
    </script>
</head>

<body>
    <div id="ticker"></div>
    <div id="acciones">
        <input type="button" id="detener" value="Detener" />
        <input type="button" id="anterior" value="&laquo; Anterior" />
        <input type="button" id="siguiente" value="Siguiente &raquo;" />
    </div>
    <div id="contenidos">
        <h1>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</h1>
        <p>Proin tristique condimentum sem. Fusce lorem sem, laoreet nec, laoreet et, venenatis nec, ligula.
            Nunc dictum sodales lorem. Fusce turpis. Nullam semper, ipsum ut ultrices mattis, nulla magna luctus
            purus, sit amet vehicula magna magna vel velit.</p>
        <h2>Morbi a lacus. Proin pharetra nisi id est.</h2>
        <p>Maecenas mollis suscipit sapien. Pellentesque blandit dui eu mauris. Etiam elit urna, iaculis non,
            dignissim in, fermentum nec, ipsum. Nulla commodo aliquam lectus. Sed vulputate diam ac sapien accumsan
            consequat. Aliquam id urna sed dolor tincidunt tempor.</p>
        <h2>Quisque consequat. Nullam vel justo.</h2>
        <p>Cras sit amet elit a mauris ultricies viverra. Phasellus placerat quam et magna. Nunc sed tellus.
            Pellentesque hendrerit pellentesque nunc. Aenean turpis. Sed justo tellus, mollis at, euismod at,
            pellentesque eu, tellus. Nam vulputate. Nunc porttitor sapien tristique velit. Vestibulum tempus,
            quam non dapibus pellentesque, sem nulla sagittis ligula, et volutpat turpis felis vitae nunc.</p>
        <p>Ut eros magna, congue in, sodales ac, facilisis ac, dolor. Aenean faucibus pellentesque est. Proin
            cursus. Vivamus mollis enim in magna. Donec urna risus, convallis eget, aliquet non, auctor sit amet, leo.
            Duis tellus purus, pharetra in, cursus sed, posuere semper, lorem. Fusce eget velit nec felis tempus
            gravida. Donec et augue vitae nulla posuere hendrerit. Nulla vehicula scelerisque massa. Phasellus eget
            lorem id quam molestie ultrices. Integer ac ligula sit amet lectus condimentum euismod. Sed malesuada
            orci eu neque.</p>
    </div>
</body>

</html>